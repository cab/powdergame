<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
  </head>
  <body>
    <script type="module">
      import { createCanvas } from './dist/index.js'
      import init, {start} from './pkg/game.js'
      async function run() {
        await init();
        let { canvas } = createCanvas()
        try {
          start(canvas)
        } catch (e) {
          if (e.message.includes("Using exceptions for control flow, don't mind me. This isn't actually an error!")) {
            // winit uses this for control flow, no need to report
          } else {
            throw e;
          }
        }
      }

      run()
    </script>
  </body>
</html>
